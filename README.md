# CompShop — Полноценный онлайн-магазин для продажи компьютерных комплектующих

**CompShop** — это мощный онлайн-магазин, предназначенный для покупки компьютерных комплектующих, аксессуаров и электроники. Система предоставляет пользователю удобный интерфейс для оформления заказов, выбора способов оплаты через банковские карты и множество других полезных функций, таких как персонализированные рекомендации с помощью GPT-3.

Проект включает как клиентскую, так и серверную части, интеграцию с внешними сервисами (GPT-3 для рекомендаций, IAR для работы с API), а также использование передовых технологий, таких как PostgreSQL для хранения данных и Docker для упрощения развертывания.

---

## Содержание

* [Описание проекта](#описание-проекта)
* [Технологии](#технологии)
* [Структура проекта](#структура-проекта)
* [Как запустить проект](#как-запустить-проект)

  * [Клонирование репозитория](#клонирование-репозитория)
  * [Установка зависимостей](#установка-зависимостей)
  * [Конфигурация](#конфигурация)
  * [Запуск проекта](#запуск-проекта)
* [Авторизация пользователей](#авторизация-пользователей)
* [Оформление заказов и выбор банковских карт](#оформление-заказов-и-выбор-банковских-карт)
* [Интеграция с GPT](#интеграция-с-gpt)
* [Тестирование](#тестирование)
* [Разработка](#разработка)
* [Лицензия](#лицензия)

---

## Описание проекта

**CompShop** — это онлайн-магазин, предоставляющий пользователям следующие возможности:

* **Регистрация и авторизация:** Пользователи могут создать аккаунт и войти в систему с использованием **JWT токенов** для обеспечения безопасности.
* **Корзина товаров:** Пользователи могут добавлять товары в корзину, изменять их количество и оформлять заказ.
* **Выбор способов оплаты:** Поддержка оплаты через **банковские карты** с безопасной обработкой платежей.
* **Админ-панель:** Администраторы могут управлять заказами, изменять их статусы, а также управлять данными пользователей.
* **Интеграция с GPT-3:** Генерация рекомендаций и помощь пользователям с помощью GPT-3.

### Главные функции:

* **Авторизация и регистрация пользователей**: Для регистрации и входа используется JWT. Этот токен позволяет обеспечивать безопасность пользовательских данных.
* **Корзина и оформление заказов**: Удобная корзина для добавления товаров и оформления заказа с интеграцией банковских карт.
* **Просмотр заказов**: Пользователи и администраторы могут отслеживать статусы заказов в реальном времени.
* **Интеграция с GPT-3**: GPT-3 помогает в предоставлении рекомендаций по товарам, улучшая пользовательский опыт.
* **Система скидок и промокодов**: Реализована система для применения скидок и промокодов при оформлении заказа.

---

## Технологии

Проект использует следующие технологии для фронтенда и бэкенда:

### Frontend

* **React** — основная библиотека для создания интерфейса.
* **React Router** — для маршрутизации между страницами.
* **Redux** — для управления состоянием на клиенте.
* **Axios** — для выполнения HTTP-запросов к серверу.
* **CSS / SASS** — для стилизации компонентов и страниц.
* **JWT** — для аутентификации пользователей через JSON Web Tokens.
* **React-Toastify** — для уведомлений пользователей.

### Backend

* **Node.js** — серверная платформа для выполнения JavaScript.
* **Express** — фреймворк для маршрутизации HTTP-запросов.
* **PostgreSQL** — реляционная база данных для хранения информации о товарах, пользователях и заказах.
* **Sequelize ORM** — для взаимодействия с PostgreSQL.
* **JWT** — для аутентификации пользователей.
* **GPT-3 (OpenAI)** — для предоставления рекомендаций и чат-бота.
* **IAR API** — для работы с внешними API и ключами.

### Инфраструктура

* **Docker** — для контейнеризации приложения.
* **Git** — для контроля версий.
* **PM2** — для управления серверными процессами.

---

## Структура проекта

Проект имеет следующую структуру:

```
CompShop/
├── backend/                # Серверная часть (Node.js + Express)
│   ├── config/             # Конфигурации
│   ├── controllers/        # Логика обработки запросов
│   ├── models/             # Модели Sequelize для базы данных
│   ├── routes/             # Роуты и маршруты API
│   ├── services/           # Сервисы для работы с внешними API (GPT, IAR)
│   └── app.js              # Главный серверный файл
│
├── frontend/               # Клиентская часть (React)
│   ├── src/
│   │   ├── components/     # UI компоненты
│   │   ├── pages/          # Страницы сайта
│   │   ├── store/          # Redux store
│   │   └── App.js          # Главный компонент
│   └── public/
│       └── index.html      # HTML-шаблон
│
├── .env                    # Конфигурационные файлы (клиент и сервер)
├── docker-compose.yml      # Файл для запуска контейнеров Docker
├── README.md               # Документация по проекту
└── package.json            # Настройки зависимостей для Node.js
```

---

## Как запустить проект

### 1. Клонирование репозитория

Перед тем как приступить к настройке и запуску проекта, необходимо клонировать репозиторий на свой локальный компьютер. Для этого используйте команду `git clone`:

```bash
git clone https://github.com/drag1web/CompShop.git
cd CompShop
```

Эта команда загрузит все необходимые файлы и папки проекта в текущую директорию. После этого вам нужно перейти в папку проекта командой `cd CompShop`, чтобы работать с проектом.

---

### 2. Установка зависимостей

Проект состоит из двух частей: **Frontend** (клиентская часть) и **Backend** (серверная часть), каждая из которых имеет свои зависимости, которые необходимо установить. Мы будем устанавливать зависимости для каждой из частей по отдельности.

#### Для Frontend:

1. Перейдите в директорию **frontend**:

   ```bash
   cd frontend
   ```

2. Установите зависимости с помощью **npm** (Node Package Manager):

   ```bash
   npm install
   ```

   Это загрузит все необходимые библиотеки, указанные в файле `package.json`, включая React, Redux, Axios и другие.

#### Для Backend:

1. Перейдите в директорию **backend**:

   ```bash
   cd backend
   ```

2. Установите зависимости для серверной части:

   ```bash
   npm install
   ```

   Это установит все нужные библиотеки для работы сервера, такие как Express, Sequelize, JWT и другие.

---

### 3. Конфигурация

После установки зависимостей, вам нужно настроить параметры проекта. Это включает в себя настройку внешних сервисов, баз данных и ключей API.

#### IAR ключи и GPT-3

Проект интегрирован с внешними сервисами, такими как **IAR API** и **GPT-3** от OpenAI. Для их работы нужно добавить соответствующие API ключи в файл конфигурации `.env` в корне проекта.

1. Перейдите в корневую папку проекта и создайте файл `.env`, если его нет.

2. Добавьте в `.env` следующие строки, заменив значениями из ваших аккаунтов:

   ```bash
   IAR_API_KEY=your_iar_api_key
   GPT_API_KEY=your_gpt_api_key
   DB_HOST=localhost
   DB_PORT=5432
   DB_USER=your_db_user
   DB_PASSWORD=your_db_password
   DB_NAME=comp_shop_db
   ```

   * **IAR\_API\_KEY** — ключ для работы с IAR API.
   * **GPT\_API\_KEY** — ключ для работы с GPT-3.
   * **DB\_HOST**, **DB\_PORT**, **DB\_USER**, **DB\_PASSWORD**, **DB\_NAME** — параметры для подключения к базе данных PostgreSQL.

#### PostgreSQL

Проект использует реляционную базу данных **PostgreSQL** для хранения информации о товарах, пользователях и заказах. Чтобы настроить PostgreSQL, вам нужно:

1. Установить PostgreSQL на вашем сервере или локальной машине.
2. Создать базу данных для проекта, например, **comp\_shop\_db**.
3. Внесите параметры подключения к базе данных в файл `.env`:

   ```bash
   PORT=5000
   PGHOST=localhost
   PGUSER=postgres
   PGPASSWORD=postgres
   PGDATABASE=myshop_utf8
   PGPORT=5432
   ```

   * **PGHOST** — адрес базы данных (по умолчанию `localhost`).
   * **PGUSER** — имя пользователя для подключения к базе данных.
   * **PGPASSWORD** — пароль для пользователя.
   * **PGDATABASE** — имя базы данных для проекта.

---

#### Docker

Если вы хотите развернуть проект с использованием **Docker** для локальной разработки, выполните следующие шаги:

1. Убедитесь, что у вас установлен **Docker** и **Docker Compose**.
2. Перейдите в корневую папку проекта и выполните команду:

   ```bash
   docker-compose up
   ```

   Эта команда создаст и запустит все контейнеры, необходимые для работы как frontend, так и backend. Docker Compose автоматически настроит все нужные зависимости и параметры для работы приложения в контейнерах.

---

### 4. Запуск проекта

Теперь, когда проект настроен, вы можете запустить его локально.

#### Запуск Backend

1. Перейдите в папку **backend**:

   ```bash
   cd backend
   ```

2. Запустите сервер с помощью команды:

   ```bash
   node server.js
   ```

   Если вы используете Docker, сервер будет запускаться внутри контейнера, и доступ к нему будет через порт, указанный в `docker-compose.yml`.

#### Запуск Frontend

1. Перейдите в папку **frontend**:

   ```bash
   cd frontend
   ```

2. Запустите клиентскую часть с помощью команды:

   ```bash
   npm start
   ```

   После этого ваше приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000) в браузере.

---

### 5. Авторизация пользователей

Проект использует **JWT (JSON Web Tokens)** для авторизации пользователей. При регистрации или входе в систему пользователи получают уникальный токен, который используется для аутентификации всех последующих запросов.

#### Основные эндпоинты для авторизации:

* `POST /api/auth/register` — Регистрация нового пользователя. При регистрации создается новый аккаунт, и пользователю отправляется JWT токен.

* `POST /api/auth/login` — Вход в систему. Пользователи вводят свои данные, и система генерирует токен для дальнейшей аутентификации.

Токен сохраняется в **localStorage** или **cookie** на клиентской стороне, а затем используется для защиты маршрутов, которые требуют авторизации (например, корзина или личный кабинет).

---

### 6. Оформление заказов и выбор банковских карт

После того как товары добавлены в корзину, пользователи могут оформить заказ. В процессе оформления заказа можно выбрать способ оплаты, например, **банковскую карту**.

#### Основные эндпоинты для заказов:

* `POST /api/order/create` — Создание нового заказа. Когда пользователь нажимает на кнопку "Оформить заказ", система создает новый заказ в базе данных.

* `GET /api/order/{id}` — Получение информации о заказе по ID. Это позволяет пользователю отслеживать статус своего заказа в реальном времени.

Процесс оформления заказа включает в себя выбор способа оплаты и отправку платежа через платежную систему (например, через интеграцию с платёжными сервисами).

---

### 7. Интеграция с GPT

**GPT-3** используется для автоматической генерации рекомендаций по товарам и для помощи пользователям на сайте. Этот инструмент анализирует покупательские предпочтения и на основе данных генерирует рекомендации, улучшая пользовательский опыт.

#### Как работает интеграция:

* Система автоматически анализирует поведение пользователей на сайте.
* GPT-3 предоставляет рекомендации, основываясь на товарах, которые были просмотрены или добавлены в корзину.
* Также GPT может использоваться для поддержки пользователей в виде чат-бота.

---

### 8. Тестирование

Для обеспечения качества проекта, важно провести тестирование как клиентской, так и серверной части:

#### Для Backend:

* **Jest** — фреймворк для тестирования серверной логики, обработки запросов, взаимодействия с базой данных и внешними сервисами.

#### Для Frontend:

* **React Testing Library** — инструмент для тестирования компонентов и взаимодействия пользователя с интерфейсом. Проверяются функциональные компоненты, обработка событий и правильность рендеринга.

---

### 9. Разработка

Для внесения изменений в проект или добавления новых фич следуйте этим шагам:

1. **Создайте новую ветку** для своей задачи:

   ```bash
   git checkout -b feature/new-feature
   ```

2. **Разработайте функционал** и сделайте коммит:

   ```bash
   git commit -m "Добавлена новая фича"
   ```

3. **Запустите тесты** и убедитесь, что все работает корректно.

4. **Создайте пулл-реквест (PR)** для своей ветки и отправьте его на проверку коллегам.

---

### 10. Лицензия

Этот проект лицензирован под **MIT лицензией**. Более подробную информацию можно найти в файле **LICENSE**.

---

Это подробное описание шагов по настройке, запуску и разработке проекта **CompShop**. В случае, если вам нужно внести дополнительные изменения или улучшения, следуйте вышеописанным рекомендациям для работы с проектом.
