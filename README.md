# CompShop

**CompShop** — это полнофункциональный онлайн-магазин, который позволяет пользователям приобретать компьютерные комплектующие, аксессуары и электронику, с возможностью удобной покупки, оформления заказов, выбора способов оплаты через банковские карты и поддержки множества других функций. Проект включает в себя реализацию как клиентской, так и серверной частей с использованием современных технологий и подходов.

Проект разделен на два основных модуля:
- Frontend — отвечает за интерфейс пользователя, написан на React.
- Backend — серверная часть, которая управляет данными, хранит информацию о товарах, пользователях и заказах в базе данных PostgreSQL и обрабатывает запросы.

Также в проекте использована интеграция с внешними сервисами, такими как **GPT-3** для рекомендаций и помощи, а также **IAR** для работы с ключами и внешними API.

Содержание

1. [Описание проекта](#описание-проекта)
2. [Технологии](#технологии)
3. [Структура проекта](#структура-проекта)
4. [Как запустить проект](#как-запустить-проект)
    - [Frontend](#frontend)
    - [Backend](#backend)
5. [Настройки и конфигурация](#настройки-и-конфигурация)
    - [IAR ключи и GPT](#iar-ключи-и-gpt)
    - [База данных PostgreSQL](#база-данных-postgresql)
    - [Конфигурация банковских карт](#конфигурация-банковских-карт)
6. [API эндпоинты](#api-эндпоинты)
7. [Тестирование](#тестирование)
8. [Разработка](#разработка)
9. [Лицензия](#лицензия)

Описание проекта

CompShop — это онлайн-магазин, который позволяет пользователям:

- Регистироваться и аутентифицироваться.
- Добавлять товары в корзину, изменять их количество и оформлять заказ.
- Выбирать способы оплаты через банковские карты (интеграция с платежной системой).
- Просматривать заказы и их статусы через админ-панель.
- Получать рекомендации по товарам с помощью GPT-3.
- Использовать систему скидок и промокодов.
  
Главные фичи:

1. Авторизация и регистрация пользователей: Пользователи могут создавать аккаунты, а также входить в систему с помощью JWT токенов для безопасности. Это позволяет пользователям хранить свои данные и заказы.
   
2. Корзина: Пользователи могут добавлять товары в корзину, изменять их количество и удалять. Корзина обновляется в реальном времени.

3. Оформление заказов: После добавления товаров в корзину, пользователи могут оформить заказ, выбрать способ оплаты и получить уведомление о статусе заказа. Интеграция с платёжными системами позволяет безопасно обрабатывать платежи с банковских карт.

4. База данных PostgreSQL: Для хранения данных о пользователях, товарах и заказах используется PostgreSQL. Все данные синхронизируются между клиентом и сервером.

5. Админ-панель: Для администраторов существует специальная панель управления, где можно просматривать заказы, изменять их статус и управлять данными пользователей.

6. Интеграция с GPT-3: На сайте интегрирован GPT-3 для обеспечения автоматической поддержки пользователей и предоставления рекомендаций по товарам. 

Технологии

Проект использует следующие технологии:

Frontend

- React: основная библиотека для построения интерфейса.
- React Router: для навигации по страницам.
- Redux: для управления состоянием на клиенте.
- Axios: для выполнения HTTP-запросов к серверу.
- CSS / SASS: для стилизации компонентов и страниц.
- JWT: для аутентификации пользователей через JSON Web Tokens.
- React-Toastify: для уведомлений пользователей.
  
 Backend

- Node.js: серверная платформа для запуска JavaScript-кода.
- Express: фреймворк для Node.js, который используется для обработки HTTP-запросов и маршрутизации.
- PostgreSQL: реляционная база данных для хранения информации о товарах, пользователях и заказах.
- Sequelize ORM: для взаимодействия с PostgreSQL.
- JWT: для безопасной аутентификации пользователей.
- GPT-3 (OpenAI): для предоставления рекомендаций и чат-бота для пользователей.
- IAR API: для доступа к внешним данным и ключам.
  
Инфраструктура

- Docker: для контейнеризации приложения, чтобы облегчить развертывание на разных платформах.
- Git: для контроля версий и управления репозиторием.
- PM2: для управления серверными процессами в продакшене.
  
Структура проекта

Проект разделен на несколько основных частей:

```

CompShop/
├── backend/                # Серверная часть (Node.js + Express)
│   ├── config/             # Конфигурации
│   ├── controllers/        # Логика обработки запросов
│   ├── models/             # Модели Sequelize для базы данных
│   ├── routes/             # Роуты и маршруты API
│   ├── services/           # Сервисы для работы с внешними API (GPT, IAR)
│   └── app.js              # Главный серверный файл
│
├── frontend/               # Клиентская часть (React)
│   ├── src/
│   │   ├── components/     # UI компоненты
│   │   ├── pages/          # Страницы сайта
│   │   ├── store/          # Redux store
│   │   └── App.js          # Главный компонент
│   └── public/
│       └── index.html      # HTML-шаблон
│
├── .env                    # Конфигурационные файлы (клиент и сервер)
├── docker-compose.yml      # Файл для запуска контейнеров Docker
├── README.md               # Документация по проекту
└── package.json            # Настройки зависимостей для Node.js

````

Как запустить проект

1. Клонирование репозитория

Первым шагом нужно клонировать репозиторий:

```bash
git clone https://github.com/drag1web/CompShop.git
cd CompShop
````

2. Установка зависимостей

Перейдите в директорию для Frontend и установите все необходимые зависимости:

```bash
cd frontend
npm install
```

Для Backend:

```bash
cd backend
npm install
```

3. Конфигурация

#### IAR ключи и GPT

Для работы с IAR API и GPT-3 вам нужно получить API ключи и добавить их в файл `.env` в корне проекта.

Пример конфигурации:

```env
IAR_API_KEY=your_iar_api_key
GPT_API_KEY=your_gpt_api_key
DB_HOST=localhost
DB_PORT=5432
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=comp_shop_db
```

PostgreSQL

1. Установите и настройте PostgreSQL, создайте базу данных.
2. Введите параметры подключения в `.env` файле:

```env
PORT=5000
PGHOST=localhost
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=myshop_utf8
PGPORT=5432
```

Docker

Если вы хотите использовать Docker для локальной разработки:

```bash
docker-compose up
```

Это создаст все необходимые контейнеры для работы с приложением (и для frontend, и для backend).

4. Запуск проекта

Запуск Backend:

```bash
cd backend
node server.js
```

Запуск Frontend:

```bash
cd frontend
npm start
```

Теперь приложение доступно на `http://localhost:3000`.

Авторизация пользователей

Проект использует JWT для авторизации пользователей. Для регистрации и входа в систему, пользователи должны пройти процесс аутентификации, после чего они получают JWT токен. Этот токен используется для авторизации всех последующих запросов, защищенных правами доступа (например, к корзине или к заказам).

Основные эндпоинты для авторизации:

POST /api/auth/register — Регистрация нового пользователя.
POST /api/auth/login — Вход в систему.

После входа в систему, токен сохраняется в localStorage или cookie и используется для аутентификации запросов.

Оформление заказов и выбор банковских карт

После того как товары добавлены в корзину, пользователи могут оформить заказ. В процессе оформления можно выбрать способ оплаты —
банковская карта. Для этого интегрирована система обработки платежей, которая безопасно обрабатывает платежи.

Основные эндпоинты для заказов:

POST /api/order/create — Создание нового заказа.
GET /api/order/{id} — Получение информации о заказе по ID.

## 📡 Интеграция с GPT

GPT-3 используется для автоматической генерации рекомендаций по товарам и поддержки пользователей. Это позволяет улучшить опыт взаимодействия с сайтом, предлагая товары, которые могут заинтересовать пользователя.

Тестирование

Для тестирования backend и frontend, можно использовать следующие инструменты:

Jest — для тестирования серверной части.
React Testing Library — для тестирования компонентов React.

Разработка

Для того, чтобы внести изменения в проект, рекомендуется следовать этим шагам:

1. Создайте ветку для своей задачи:

   ```bash
   git checkout -b feature/new-feature
   ```

2. Разработайте функционал и сделайте коммит:

   ```bash
   git commit -m "Добавлена новая фича"
   ```

3. Запустите тесты и убедитесь, что все работает корректно.

4. Сделайте пулл-реквест и дождитесь проверки.

Лицензия

Этот проект лицензирован под лицензией MIT. См. файл [LICENSE](LICENSE) для получения дополнительной информации.
